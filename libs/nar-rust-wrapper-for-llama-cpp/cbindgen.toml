# cbindgen configuration for NAR Rust wrapper C FFI
# Generates C headers for interfacing with the Rust NAR library

language = "C"
autogen_warning = "/* Warning, this file is autogenerated by cbindgen. Don't modify this manually. */"

header = """
/**
 * BunkerVerse Platform - Narrative AI Runtime (NAR) C FFI
 * 
 * This header provides a C interface to the Rust-based NAR library
 * for integration with C++ client applications.
 * 
 * Memory Management:
 * - All strings returned by NAR functions must be freed using free_nar_string()
 * - All error messages must be freed using free_nar_error_message()
 * - Failure to free allocated memory will result in memory leaks
 * 
 * Thread Safety:
 * - NAR functions are not thread-safe by default
 * - Use external synchronization when calling from multiple threads
 */

#ifndef NAR_FFI_H
#define NAR_FFI_H

#ifdef __cplusplus
extern "C" {
#endif

#include <stdarg.h>
#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>
"""

trailer = """
#ifdef __cplusplus
}
#endif

#endif /* NAR_FFI_H */
"""

include_version = true

[parse]
parse_deps = true
include = ["nar-rust-wrapper-for-llama-cpp"]
exclude = []

[export]
include = []
exclude = []
item_types = ["globals", "enums", "structs", "unions", "typedefs", "opaque", "functions", "constants"]
renaming_overrides_prefixing = false

[export.prefix]
# Prefix all exported symbols with NAR_ to avoid naming conflicts
prefix = "NAR_"

[export.body]
# Generate function bodies for inline functions
generate_extern = true

[export.rename]
# Custom name mappings for better C compatibility
# "RustType" = "c_type"

[fn]
# Function-specific configurations
rename_args = "PascalCase"
must_use = true
include_path_types = true

[struct]
# Struct-specific configurations  
rename_fields = "PascalCase"
derive_constructor = false
derive_clone = false
derive_debug = false

[enum]
# Enum-specific configurations
rename_variants = "ScreamingSnakeCase"
must_use = true
derive_tagged_enum = false
derive_helper_methods = false

[const]
allow_static_const = false
allow_constexpr = false

[macro_expansion]
bitflags = false

[layout]
packed = false
aligned_n = false